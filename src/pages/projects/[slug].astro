---
import BaseLayout from "../../layouts/BaseLayout.astro";
import { getCollection } from "astro:content";

export async function getStaticPaths() {
  const projects = await getCollection("projects");
  return projects.map(p => ({ params:{slug:p.slug}, props:{project:p} }));
}

const { project } = Astro.props;
---

<BaseLayout title={`${project.data.title} — s_0 studio`}>
  <article class="project">
    <div class="project-hero reveal">
      <img src={project.data.images[0]} alt={project.data.title} />
    </div>

    <header class="project-meta reveal">
      <h1>{project.data.title}</h1>
      <p class="project-info">{project.data.year} · {project.data.location}</p>
      <div class="project-description"><p>{project.body}</p></div>
    </header>

    <section class="project-gallery">
      {project.data.images.slice(1).map(img => <img src={img} class="reveal" />)}
    </section>
  </article>
</BaseLayout>

<style>
.project { max-width:1100px; margin:auto; }
.project-hero img, .project-gallery img { width:100%; display:block; }
.project-meta { margin-top:80px; max-width:700px; }
.project-info { color:var(--gray); margin-bottom:24px; }
.project-gallery { margin-top:120px; display:grid; gap:120px; }
</style>
