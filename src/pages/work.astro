---
import BaseLayout from "../layouts/BaseLayout.astro";
import { getCollection } from "astro:content";

let projects = [];
try {
  projects = await getCollection("projects");
  projects = projects.sort((a, b) => Number(b.data.year) - Number(a.data.year));
} catch(e){ console.warn(e); }
---

<BaseLayout title="Work â€” s_0 studio">
  <section><h1>Work</h1></section>

  <section>
    {projects.length ? (
      <div class="project-grid">
        {projects.map(project => (
          <a href={`/projects/${project.slug}`} class="project-card reveal">
            <img src={project.data.images[0]} alt={project.data.title} />
            <h3>{project.data.title}</h3>
            <p>{project.data.year}</p>
          </a>
        ))}
      </div>
    ) : (
      <p>No projects yet.</p>
    )}
  </section>
</BaseLayout>

<style>
.project-grid { display:grid; grid-template-columns:repeat(auto-fit,minmax(280px,1fr)); gap:48px; }
.project-card { transition:opacity .6s ease, transform .6s ease; }
.project-card img { width:100%; display:block; }
</style>
