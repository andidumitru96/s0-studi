---
import BaseLayout from "../layouts/BaseLayout.astro";
import { getCollection } from "astro:content";

const projects = (await getCollection("projects"))
  .sort((a, b) => (b.data.year ?? 0) - (a.data.year ?? 0));
---

<BaseLayout title="Work â€” s_0 studio">
  <section>
    <h1>Work</h1>
  </section>

  <section>
    <div class="project-grid">
      {projects.map((project, index) => (
        <a
          href={`/projects/${project.slug}`}
          class="project-card reveal"
          style={`transition-delay:${index * 80}ms`}
        >
          <img src={project.data.images[0]} alt={project.data.title} />
          <h3>{project.data.title}</h3>
          <p>{project.data.year}</p>
        </a>
      ))}
    </div>
  </section>
</BaseLayout>

<style>
.project-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
  gap: 48px;
}
.project-card {
  transition-delay: calc(var(--i) * 80ms);
}
.project-card:nth-child(1) { --i: 0; }
.project-card:nth-child(2) { --i: 1; }
.project-card:nth-child(3) { --i: 2; }
.project-card:nth-child(4) { --i: 3; }
.project-card:nth-child(5) { --i: 4; }
.project-card:nth-child(6) { --i: 5; }
</style>

